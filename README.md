# Monitoring Service
Monitoring Service - REST веб-сервис для подачи показаний счетчиков различных типов.

# Используемые технологии, библиотеки и фреймворки
- Spring Boot
- Springdoc
- PostgreSQL
- Docker
- Mapstruct
- Lombok
- JUnit
- AssertJ
- Mockito
# Запуск веб-сервиса
-Клонируйте репозиторий на ваш компьютер.

-Разверните PostgreSQL в docker, с параметрами указанными в файле docker-compose.yml

-Откройте проект в среде разработки.

-Запустите класс Application для начала работы.
# API Endpoints
- Все эндпоинты в случае ошибки, например, если данные неверны, возвращают статус-код 400.
#### Эндпоинты без авторизации

- "**_/registration_**" (**POST**) - в теле запроса ожидает данные для регистрации.
При корректных данных регистрирует нового пользователя и сохраняет сведения о нём в базе данных.


- "**_/login_**" (**POST**) - в теле запроса ожидает данные для авторизации.
При корректных данных обновляет параметры сессии пользователя, загружая в нее ID и его роль в системе.
#### Эндпоинты с авторизацией (начинаются с /api/)
- Если пользователь без авторизации попробует получить доступ к любому из указанных конечных точек, то он получит ответ с кодом состояния 401.


- "**_/api/logout_**" (**GET**) - Обновляет параметры сессии пользователя, убирая из параметров ID и его роль в системе.


- "**_/api/readout_**" (**POST**) - в теле запроса ожидает данные для регистрации нового показания.
При корректных данных сохраняет новое показание счетчика в базе данных для пользователя, ID которого указано в параметрах сессии.


- "**_/api/newType_**" (**POST**) - в теле запроса ожидает данные для регистрации нового типа счетчиков.
Доступно только для пользователей с ролью "ADMIN".
При корректных данных сохраняет новый счетчик в базе данных.


- "**_/api/newMeter_**" (**POST**) - в теле запроса ожидает данные для регистрации нового счетчика на пользователя.
Доступно только для пользователей с ролью "USER".
При корректных данных сохраняет новый тип счетчика в базе данных для пользователя, ID которого указано в параметрах сессии.


- "**_/api/month_**" (**POST**) - в теле запроса ожидает данные, нужные для получения сведений о показаниях за конкретный месяц.
Для пользователя с ролью "USER" достаточно указать только месяц.
Для пользователей с ролью "ADMIN" нужно будет дополнительно указать логин нужного пользователя.
При корректных данных возвращает в теле ответа данные о показаниях за месяц, указанный в запросе.


- "**_/api/history_**" (**GET**) - возвращает в теле ответа данные о показаниях за все время для пользователя, ID которого указано в параметрах сессии.


- "**_/api/history_**" (**POST**) - в теле запроса ожидает логин нужного пользователя.
Доступно только для пользователей с ролью "ADMIN".
При корректных данных возвращает в теле ответа данные о показаниях для пользователя, логин которого был указан в запросе.


- "**_/api/actual_**" (**GET**) - возвращает в теле ответа данные о последних показаниях для каждого счетчика у пользователя, ID которого указано в параметрах сессии.


- "**_/api/actual_**" (**POST**) - в теле запроса ожидает логин нужного пользователя.
Доступно только для пользователей с ролью "ADMIN".
Возвращает в теле ответа данные о последних показаниях для каждого счетчика у пользователя, логин которого был указан в запросе.


- "**_/api/actual_**" (**GET**) - для пользователя с ролью "USER" возвращает список имеющихся у него счетчиков.
Для пользователей с ролью "ADMIN" возвращает список всех типов счетчиков, которые есть в системе.